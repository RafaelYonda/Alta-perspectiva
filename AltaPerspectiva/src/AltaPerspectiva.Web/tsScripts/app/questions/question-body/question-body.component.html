<style>
    .category-header {
    }

        .category-header h2 {
            display: inline-block;
        }

        .category-header h4 {
            text-align: center;
        }

    .read-question-button {
        margin-left: 15px;
        margin-bottom: 10px;
        display: inline-block;
    }

        .read-question-button > a {
            margin-right: 10px;
            font-size: 17px;
        }

    .read-question-button .btn {
        width: 200px;
        color: black;
    }

    read-question-button .dropdown-menu {
        left: 5px;
        min-width: 200px;
    }

    .tags-container {
        margin-left: 0;
        margin-right: 0;
    }

    .more-btn {
        float: left;
        padding: 5px;
        font-weight: 700;
    }
</style>
<div class="row row-fix">
    <div #dialogAnchor></div>
    <div #answerAnchor></div>
</div>
<div class="left-panel">
    <div id="leftPanel">
        <level></level>
        <topfive-question-left-menu> </topfive-question-left-menu>
        <topfive-user></topfive-user>
    </div>
</div>
<div id="toggleMenu" class="right-panel category-panel-xs">
    <div class="menu-container visible-xs">
        <div class="cloe-button">
            <a (click)="hideMenu()"> <i class="fa fa-arrow-left"></i> </a>
        </div>
        <ul class="left-panel-list">
            <li class=""><a routerLink="/">Alta Perspectiva</a></li>
            <li><a routerLink="/question/home/1">Preguntas</a></li>

            <li *ngIf="_logObj.isLoggedIn"><a (click)="gotoProfile()"> Perfil</a></li>
            <li *ngIf="_logObj.isLoggedIn"><a href="/signout"> Cerrar sesión </a></li>

            <li *ngIf="!_logObj.isLoggedIn"><a href="/signin">Iniciar sesión</a></li>
            <li *ngIf="!_logObj.isLoggedIn"><a href="/signin">Regístrate <!--Register--></a></li>
        </ul>
    </div>
    <category-left-menu [caegoryId]="categoryId"></category-left-menu>
</div>
<div class="center-width center-body z-ground center-fix">
    <div class="modal-overlay z-modal" *ngIf="loader.isLoading">
        <div class="loader"></div>
    </div>
    <div class="row row-fix category-header">
        <div class="pull-left">
            <img align="left" class="img-rounded img-category" src="{{categorySelected?.image}}" />
            <h2 class="category-title">
                {{categorySelected?.name}}
            </h2>
            <h2 class="category-title" *ngIf="topicName">
                . {{topicName}}
            </h2>
            <h2 class="category-title" *ngIf="levelName">
                . {{levelName}}
            </h2>
        </div>
        <div class="pull-right">
            <h4>
                {{totalCount?.totalFollowers}}
            </h4>
            <h4>Seguidores<!--Followers--></h4>
        </div>
    </div>

    <div class="row row-fix">
        <button type="button" (click)="addFollower(categorySelected.id)" class="alta-btn alta-btn-lg">Seguir<!--Follow--></button>
        <p>
            {{categorySelected?.description}}
        </p>
    </div>
    <br />
    <div class="row tags-container">
        <div *ngIf="topFiveTopics?.length == 0">
            <div class="tags">
                <!--No topics for this category-->
                No hay temas para esta catego- ria
            </div>
        </div>
        <div *ngIf="topFiveTopics?.length!=0">
            <div class="tags" *ngFor="let topic of topFiveTopics">
                <a [routerLink]="['/question/home',topic?.categoryId,topic?.id,0]"> {{topic.topicName}}</a>
            </div>

            <div class="more-btn">
                <a (click)="toggleShowMoreTopic()" *ngIf="showMoreTopic && topics.length>5">Ver más..<!--Show more--></a>
            </div>
            <div class="more-btn">
                <a (click)="toggleShowMoreTopic()" *ngIf="!showMoreTopic"><!--Hide more-->Ocultar..</a>
            </div>
        </div>

    </div>
    <div class="filter-panel">
        <div class="read-question-button">
            <a (click)="getQuestionsAnswered(categorySelected.id)">
                {{totalCount?.totalAnsweredQuestion}} Preguntas <!--Read-->
            </a>
            <a (click)="getQuestionNotAnswered(categorySelected.id)">
                {{totalCount?.totalUnAnsweredQuestion}} Sin responder <!--Answer-->
            </a>
        </div>
        <div class="read-question-button">
            <div class="dropdown">
                <button class="btn dropdown-toggle" type="button" id="menu1" data-toggle="dropdown">
                    <span class="pull-left" id="icon-select">{{FilterParam}}</span>
                    <span id="icon-view" style="margin-left: 20px; float: left; margin-top: 3px;"></span>
                    <span class="caret pull-right" style="margin-top:8px;"></span>
                </button>
                <ul class="dropdown-menu" role="menu" aria-labelledby="menu1">
                    <li role="presentation"><a (click)="GetLatestQuestionByDate(categorySelected.id)">Preguntas más recientes<!--The latest question--></a></li>
                    <li role="presentation"><a (click)="getbestquestionbytotallike(categorySelected.id)">Preguntas con más “Me gusta” <!--The best Question--></a></li>
                    <li role="presentation"><a (click)="getmorequestionbyviewcount(categorySelected.id)">Preguntas más vistas <!--The more views--></a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="search-results"
         infinite-scroll
         infiniteScrollDistance="1"
         infiniteScrollThrottle="100"
         (scrolled)="onScroll()">
        <div *ngFor="let question of questions">
            <question-panel [question]="question"></question-panel>
        </div>
    </div>
    
    <!-- For Hover pop up get some space to show -->
    <div class="hidden-xs" style="height:200px;position:relative;"></div>
</div>

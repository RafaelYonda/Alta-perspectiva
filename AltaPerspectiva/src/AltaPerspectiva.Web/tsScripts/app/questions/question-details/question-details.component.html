<style>
    .disabledFollowingImg {
        height: 25px;
        opacity: .1;
    }

    .enableFollowingImg {
        height: 25px;
        opacity: 1;
    }

        .enableFollowingImg:hover {
            height: 30px;
        }

    .filter-panel {
        margin-left: 2px;
        margin-right: 15px;
    }
</style>

<div #answerAnchor></div>
<div #questionReport></div>
<div #logginAnchor></div>

<div id="toggleMenu" class="left-panel category-panel-xs">
    <div class="menu-container visible-xs">
        <div class="cloe-button">
            <a (click)="hideMenu()"> <i class="fa fa-arrow-left"></i> </a>
        </div>
        <ul class="left-panel-list">
            <li class=""><a routerLink="/">Alta Perspectiva</a></li>
            <li><a routerLink="/question/home/1">Preguntas</a></li>
            <li *ngIf="_logObj.isLoggedIn"><a (click)="gotoProfile()"> Perfil</a></li>
            <li *ngIf="_logObj.isLoggedIn"><a href="/signout"> Cerrar sesión </a></li>
            <li *ngIf="!_logObj.isLoggedIn"><a href="/signin">Iniciar sesión</a></li>
            <li *ngIf="!_logObj.isLoggedIn"><a href="/signin">Regístrate <!--Register--></a></li>
        </ul>
    </div>
    <related-question-left-menu></related-question-left-menu>
    <related-topic [topicId]="question?.questionTopics[0]?.topicId"></related-topic>
    <category-left-menu [caegoryId]="question?.categories[0]?.id"></category-left-menu>
</div>

<!-- =========Question========== -->
<div *ngIf="!showQuestionEditForm">
    <div class="center-width center-fix center-body z-ground">
        <question-header [question]="question"></question-header>
        <h1 class="question-title">
            {{question.title}}
        </h1>
        <div class="article-details">
            <user-info [userObj]="question.userViewModel" [viewDate]="question?.createdOn" [isAnonymous]="question?.isAnonymous"></user-info>
            <p class="answer-text" [innerHTML]="question.body"></p>
            <ap-status [isQuestion]='true' [questionObj]="question" (onQuestionDetailClicked)="onQuestionDetailClicked($event)" (onQuestionReportClicked)="onQuestionReportClicked($event,questionId,answerId)"> </ap-status>
            <ap-comment [isQuestion]='true' [questionId]="question?.id"></ap-comment>
        </div>
        <hr />
        <button class="answer-button" (click)="answerDialogBox(question)">
            <!--Answer-->
            Responder
        </button>
        <div class="summery-panel">
            <h4>
                {{question.answers?.length}} <!--Answers-->Respuestas
            </h4>
            <div class="row filter-panel">
                <div class="col-md-6">
                    <a (click)="GetLatestAnswer(question.id)">
                        <h4>
                            <!--The latest answers-->
                            Últimas respuestas
                        </h4>
                    </a>
                </div>
                <div class="col-md-6">
                    <a (click)="GetBestAnswer(question.id)">
                        <h4>
                            <!--The best answer-->
                            Mejores respuestas
                        </h4>
                    </a>
                </div>
                <!--<div class="col-md-4"><h4>The more view answers</h4></div>-->
            </div>
            <hr />
        </div>

        <!-- =========Answers============== -->
        <div *ngFor="let answer of question.answers">
            <div class="article-details" *ngIf="answer">
                <div id="{{answer?.id}}">
                    <user-info [userObj]="answer?.userViewModel" [viewDate]="answer?.createdOn" [isAnonymous]="answer?.isAnonymous"></user-info>
                    <div class="pull-right">
                        <a (click)="QuestionFollowing(answer)">
                            <img [ngClass]="{ 'enableFollowingImg': !answer?.isFollowing, 'disabledFollowingImg': answer?.isFollowing  }" src="../../images/FollowingImage.svg" />
                        </a>
                    </div>
                    <p class="answer-text" [innerHTML]="answer.text"></p>
                    <ap-status [isQuestion]='false' [questionObj]="question" [answerObj]="answer" (onQuestionReportClicked)="onQuestionReportClicked($event,questionId,answerId)"> </ap-status>
                    <ap-comment [isQuestion]='false' [questionId]="question?.id" [answerId]="answer.id"></ap-comment>
                </div>
            </div>
            <hr />
        </div>
    </div>
</div>
<div *ngIf="showQuestionEditForm">
    <div class="center-width center-body center-fix z-ground">
        <form (ngSubmit)="updateQuestion()" #questionVM="ngForm">
            <question-header [question]="question"></question-header>
            <h1 class="question-title">
                <input style="width:538px;" [(ngModel)]="editTitle" name="editField" #editField="ngModel" required />
            </h1>
            <br />
            <hr />
            <textarea name="editBody" class="question-control" placeholder="Agrega detalle de tu pregunta - Optional" [(ngModel)]="editBody" [ngModelOptions]="{standalone: true}" rows="6" cols="86"></textarea>
            <div>
                <button type="submit" class="btn btn-success fixed-height" [disabled]="!questionVM.form.valid">
                    <!--Update-->
                    Actualizar
                </button>
                <button type="button" class="btn btn-info fixed-height" (click)="onQuestionDetailClicked(false)">
                    <!--Cancel-->
                    Cancelar
                </button>
            </div>
        </form>
    </div>
</div>
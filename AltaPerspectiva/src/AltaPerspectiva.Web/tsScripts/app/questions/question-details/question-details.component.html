<div #answerAnchor></div>
<div class="left-panel">
    <related-question-left-menu></related-question-left-menu>
    <related-topic [topicId]="question?.questionTopics[0]?.topicId"></related-topic>
    <category-left-menu [caegoryId]="question?.categories[0]?.id"></category-left-menu>
</div>

<!-- =========Question========== -->
<div *ngIf="!showQuestionEditForm">
    <div class="center-width center-body z-ground">
        <question-header [question]="question"></question-header>
        <h1 class="question-title">
            {{question.title}}
        </h1>
        <div class="article-details">
            <user-info [userObj]="question.userViewModel" [viewDate]="question?.createdOn" [isAnonymous]="question?.isAnonymous"></user-info>
            <p class="answer-text" [innerHTML]="question.body"></p>
            <ap-status [isQuestion]='true' [questionObj]="question" (onQuestionDetailClicked)="onQuestionDetailClicked($event)"> </ap-status>
            <ap-comment [isQuestion]='true' [questionId]="question?.id"></ap-comment>
        </div>
        <hr />
        <button class="answer-button" (click)="answerDialogBox(question)">Answer</button>
        <div class="summery-panel">
            <h4>{{question.answers?.length}} Answers</h4>
            <div class="filter-panel">
                <div class="col-md-4"><a (click)="GetLatestAnswer(question.id)"><h4>The latest answers</h4></a></div>
                <div class="col-md-4"><a (click)="GetBestAnswer(question.id)"><h4>The best answer</h4></a></div>
                <!--<div class="col-md-4"><h4>The more view answers</h4></div>-->
            </div>
            <hr />
        </div>

        <!-- =========Answers============== -->
        <div *ngFor="let answer of question.answers">
            <div class="article-details" *ngIf="answer">
                <user-info [userObj]="answer?.userViewModel" [viewDate]="answer?.createdOn"></user-info>
                <p class="answer-text" [innerHTML]="answer.text"></p>
                <ap-status [isQuestion]='false' [questionObj]="question" [answerObj]="answer"> </ap-status>
                <ap-comment [isQuestion]='false' [questionId]="question?.id" [answerId]="answer.id"></ap-comment>
            </div>
            <hr />
        </div>

    </div>
</div>
<div *ngIf="showQuestionEditForm">

    <div class="center-width center-body z-ground">
        <form (ngSubmit)="updateQuestion()" #questionVM="ngForm">
            <question-header [question]="question"></question-header>
            <h1 class="question-title">
                <input style="width:538px;" [(ngModel)]="editTitle" name="editField" #editField="ngModel" required />
            </h1>
            <br />
            <hr />
            <textarea name="editBody" class="question-control" placeholder="Agrega detalle de tu pregunta - Optional" [(ngModel)]="editBody" [ngModelOptions]="{standalone: true}" rows="6" cols="86"></textarea>
            <div>
                <button type="submit" class="btn btn-primary fixed-height" [disabled]="!questionVM.form.valid">Update</button>
                <button type="button" class="btn btn-info fixed-height" (click)="onQuestionDetailClicked(false)">Cancel</button>
            </div>
        </form>
    </div>
</div>
